<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Menu Makanan & Minuman</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: 'Courier New', Courier, monospace;
      background-color: #f9e8d2;
      color: #5b3e2f;
    }
    .menu-section {
      padding: 20px 0;
      border-top: 2px solid #5b3e2f;
      border-bottom: 2px solid #5b3e2f;
      background-color: rgba(255, 255, 255, 0.8);
    }
    .menu-item {
      margin-bottom: 20px;
      border-radius: 10px;
      background-color: #f8d7b9;
      overflow: hidden;
      transition: transform 0.3s, filter 0.5s ease;
    }
    .menu-item img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .menu-item.ordered {
      background-color: #c9e6c7;
    }
    .menu-item.ordered .btn-order {
      background-color: #ccc;
      pointer-events: none;
    }
    .order-list {
      margin-top: 20px;
    }
    .menu-item:hover {
      transform: scale(1.05);
      box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
    }
    .modal-content {
      background-color: #fff8e1;
    }
    .modal-header {
      background-color: #ffecb3;
    }
    .modal-title {
      color: #5b3e2f;
    }
    .btn-close {
      background-color: #ffecb3;
    }
    .btn-primary {
      background-color: #5b3e2f;
      border-color: #5b3e2f;
    }
    .btn-primary:hover {
      background-color: #3e2c1f;
      border-color: #3e2c1f;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="text-center my-4">
      <h1>Menu Makanan & Minuman</h1>
      <p>Silakan pilih menu dan jumlah yang ingin dipesan!</p>
    </div>

    <!-- Food Menu Section -->
    <div class="menu-section">
      <h2 class="text-center">Makanan</h2>
      <div class="row">
        <div class="col-md-4">
          <div class="menu-item card" data-name="Nasi Goreng" data-price="20000" id="item-nasi">
            <img src="img/Nasi Goreng (Indonesian Chicken Fried Rice).jpg" alt="Nasi Goreng" />
            <div class="card-body">
              <h5 class="card-title">Nasi Goreng</h5>
              <p class="card-text">Rp 20,000</p>
              <input type="number" id="qty-nasi" class="form-control mb-2" min="1" value="1" />
              <button class="btn btn-primary btn-order" onclick="addItemToOrder('Nasi Goreng', 20000, 'qty-nasi')">
                Pesan
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="menu-item card" data-name="Mie Ayam" data-price="15000" id="item-mie">
            <img src="img/Mie Ayam Ceker.jpg" alt="Mie Ayam" />
            <div class="card-body">
              <h5 class="card-title">Mie Ayam</h5>
              <p class="card-text">Rp 15,000</p>
              <input type="number" id="qty-mie" class="form-control mb-2" min="1" value="1" />
              <button class="btn btn-primary btn-order" onclick="addItemToOrder('Mie Ayam', 15000, 'qty-mie')">
                Pesan
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="menu-item card" data-name="Bakso" data-price="18000" id="item-bakso">
            <img src="img/bakso.jpg" alt="Bakso" />
            <div class="card-body">
              <h5 class="card-title">Bakso</h5>
              <p class="card-text">Rp 18,000</p>
              <input type="number" id="qty-bakso" class="form-control mb-2" min="1" value="1" />
              <button class="btn btn-primary btn-order" onclick="addItemToOrder('Bakso', 18000, 'qty-bakso')">
                Pesan
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Drink Menu Section -->
    <div class="menu-section">
      <h2 class="text-center">Minuman</h2>
      <div class="row">
        <div class="col-md-4">
          <div class="menu-item card" data-name="Es Teh" data-price="5000" id="item-esteh">
            <img src="img/teh.jpg" alt="Es Teh" />
            <div class="card-body">
              <h5 class="card-title">Es Teh</h5>
              <p class="card-text">Rp 5,000</p>
              <input type="number" id="qty-esteh" class="form-control mb-2" min="1" value="1" />
              <button class="btn btn-primary btn-order" onclick="addItemToOrder('Es Teh', 5000, 'qty-esteh')">
                Pesan
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="menu-item card" data-name="Es Jeruk" data-price="7000" id="item-esjeruk">
            <img src="img/jus jeruk.jpg" alt="Es Jeruk" />
            <div class="card-body">
              <h5 class="card-title">Jus Jeruk</h5>
              <p class="card-text">Rp 7,000</p>
              <input type="number" id="qty-esjeruk" class="form-control mb-2" min="1" value="1" />
              <button class="btn btn-primary btn-order" onclick="addItemToOrder('Es Jeruk', 7000, 'qty-esjeruk')">
                Pesan
              </button>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="menu-item card" data-name="Kopi" data-price="10000" id="item-kopi">
            <img src="img/kopi.jpg" alt="Kopi" />
            <div class="card-body">
              <h5 class="card-title">Kopi</h5>
              <p class="card-text">Rp 10,000</p>
              <input type="number" id="qty-kopi" class="form-control mb-2" min="1" value="1" />
              <button class="btn btn-primary btn-order" onclick="addItemToOrder('Kopi', 10000, 'qty-kopi')">
                Pesan
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Order List and Checkout -->
    <div class="order-list">
      <h3>Pesanan Anda:</h3>
      <ul id="order-items" class="list-unstyled"></ul>
      <p>
        <strong>
          Total: Rp <span id="total-order">0</span>
        </strong>
      </p>
      <button class="btn btn-success" onclick="checkoutOrder()">Checkout</button>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="paymentModalLabel">Pilih Metode Pembayaran</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h5>Rincian Pesanan:</h5>
          <ul id="order-summary" class="list-unstyled"></ul>
          <p>
            <strong>
              Total: Rp <span id="total-summary">0</span>
            </strong>
          </p>
          <p>Pilih metode pembayaran:</p>
          <div>
            <select id="payment-method" class="form-control">
              <option value="" disabled selected>Pilih Metode Pembayaran</option>
              <option value="cash">Tunai</option>
              <option value="ewallet">Online Payment</option>
              <option value="bank_transfer">Transfer Bank</option>
              <option value="debit_card">Kartu Debit</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
          <button type="button" class="btn btn-primary" onclick="completePayment()">Bayar</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let totalOrder = 0;
    let orderItems = [];

    function addItemToOrder(name, price, qtyId) {
      const quantity = parseInt(document.getElementById(qtyId).value);
      if (isNaN(quantity) || quantity <= 0) {
        alert("Jumlah harus minimal 1.");
        return;
      }

      const itemTotal = price * quantity;
      totalOrder += itemTotal;
      orderItems.push({ name, quantity, itemTotal, status: "Menunggu Pembayaran" });

      // Simpan pesanan in-progress ke localStorage
      localStorage.setItem("orderItems", JSON.stringify(orderItems));
      localStorage.setItem("totalOrder", totalOrder);

      // Tampilkan pesanan pada tampilan user
      const orderList = document.getElementById("order-items");
      const li = document.createElement("li");
      li.textContent = `${name} x${quantity} - Rp ${itemTotal}`;
      orderList.appendChild(li);

      document.getElementById("total-order").textContent = totalOrder;

      // Nonaktifkan tombol setelah dipesan dan ubah tampilan kartu
      const button = document.querySelector(`#${qtyId}`).nextElementSibling;
      button.disabled = true;
      button.closest(".menu-item").classList.add("ordered");
    }

    function checkoutOrder() {
      const orderSummary = document.getElementById("order-summary");
      orderSummary.innerHTML = "";
      orderItems.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = `${item.name} x${item.quantity} - Rp ${item.itemTotal}`;
        orderSummary.appendChild(li);
      });
      document.getElementById("total-summary").textContent = totalOrder;
      new bootstrap.Modal(document.getElementById("paymentModal")).show();
    }

    function completePayment() {
      // Ubah status pesanan menjadi "Dibayar"
      orderItems.forEach((item) => (item.status = "Dibayar"));

      // Pindahkan pesanan ke localStorage khusus untuk dapur (halaman koki)
      const existingKitchenOrders = JSON.parse(localStorage.getItem("kitchenOrders")) || [];
      const newKitchenOrders = existingKitchenOrders.concat(orderItems);
      localStorage.setItem("kitchenOrders", JSON.stringify(newKitchenOrders));

      alert("Pembayaran berhasil! Terima kasih.");

      // Hapus data pesanan in-progress milik user
      localStorage.removeItem("orderItems");
      localStorage.removeItem("totalOrder");

      orderItems = [];
      totalOrder = 0;
      document.getElementById("order-items").innerHTML = "";
      document.getElementById("total-order").textContent = 0;

      const paymentModal = bootstrap.Modal.getInstance(document.getElementById("paymentModal"));
      paymentModal.hide();
    }
  </script>
  <!-- Footer -->
<footer class="text-center py-4 mt-5 animate__animated animate__fadeInUp" style="background-color: #f8d7b9; color: #5b3e2f;">
  <div class="container">
    <p class="mb-1">&copy; 2025 Warung Varen. All rights reserved.</p>
    <small>Di Buat Dengan Sepenuh Hati‚ù§</small>
  </div>
</footer>

<!-- Animate.css CDN -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
/>
</body>
</html>
